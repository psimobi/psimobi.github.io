import{d as _,f as S}from"./chunk-YQ5JLV7H.js";import{a as O}from"./chunk-4GTULNN5.js";import{A as l,C as F,D as E,G as M,H as R,I as y,N as I,P as N,i as h,k as C,n as b,z as x}from"./chunk-PPRTIXCJ.js";import{$b as v,Ab as t,Bb as u,Kb as f,Lb as w,Ta as a,Ya as d,Zb as n,db as g,ic as P,jb as c,yb as m,zb as i}from"./chunk-RLPVV6HC.js";var k=(r,e)=>({"alert-success":r,"alert-danger":e});function T(r,e){r&1&&(i(0,"div",10),n(1," As senhas n\xE3o coincidem. "),t())}function A(r,e){if(r&1&&(i(0,"div",11),n(1),t()),r&2){let o=w();m("ngClass",P(2,k,!o.isError,o.isError)),a(),v(" ",o.message," ")}}var G=class r{constructor(e,o,s,p){this.fb=e;this.passwordService=o;this.route=s;this.router=p;this.resetPasswordForm=this.fb.group({password:["",[l.required,l.minLength(6)]],confirmPassword:["",[l.required]]},{validator:this.passwordMatchValidator})}resetPasswordForm;token=null;message="";isError=!1;ngOnInit(){this.token=this.route.snapshot.queryParamMap.get("token")}passwordMatchValidator(e){return e.get("password")?.value===e.get("confirmPassword")?.value?null:{mismatch:!0}}onSubmit(){this.resetPasswordForm.valid&&this.token&&this.passwordService.resetPassword(this.resetPasswordForm.value.password,this.token).subscribe({next:e=>{this.message=e.message,this.isError=!1,setTimeout(()=>this.router.navigate(["/login"]),3e3)},error:e=>{this.message=e.error.message||"Ocorreu um erro. Tente novamente.",this.isError=!0}})}static \u0275fac=function(o){return new(o||r)(d(I),d(O),d(_),d(S))};static \u0275cmp=g({type:r,selectors:[["app-reset-password"]],decls:16,vars:4,consts:[[1,"reset-password-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","alert mt-3",3,"ngClass",4,"ngIf"],[1,"alert","alert-danger"],[1,"alert","mt-3",3,"ngClass"]],template:function(o,s){if(o&1&&(i(0,"div",0)(1,"h2"),n(2,"Redefinir Senha"),t(),i(3,"form",1),f("ngSubmit",function(){return s.onSubmit()}),i(4,"div",2)(5,"label",3),n(6,"Nova Senha"),t(),u(7,"input",4),t(),i(8,"div",2)(9,"label",5),n(10,"Confirmar Nova Senha"),t(),u(11,"input",6),t(),c(12,T,2,0,"div",7),i(13,"button",8),n(14,"Redefinir Senha"),t()(),c(15,A,2,5,"div",9),t()),o&2){let p;a(3),m("formGroup",s.resetPasswordForm),a(9),m("ngIf",s.resetPasswordForm.hasError("mismatch")&&((p=s.resetPasswordForm.get("confirmPassword"))==null?null:p.touched)),a(),m("disabled",s.resetPasswordForm.invalid||!s.token),a(2),m("ngIf",s.message)}},dependencies:[N,M,x,F,E,R,y,b,h,C],styles:[".reset-password-container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;padding:20px;border:1px solid #ccc;border-radius:5px;text-align:center}.reset-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px;text-align:left}.reset-password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box}.reset-password-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:10px}.reset-password-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin-top:15px}"]})};export{G as ResetPasswordComponent};
